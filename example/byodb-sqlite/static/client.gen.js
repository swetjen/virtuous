// Virtuous client hash: 504b80979435760bcfbd3c65058d9f7d92763d418b53f858287cc82980b2d9ad
// Code generated by Virtuous runtime; DO NOT EDIT.

/**
 * @typedef {Object} AuthOptions
 * @property {string} [auth]
 */

/**
 * @template E
 * @extends {Error}
 */
export class RPCError extends Error {
	/**
	 * @param {number} status
	 * @param {E|null} body
	 * @param {string} message
	 */
	constructor(status, body, message) {
		super(message)
		this.status = status
		this.body = body
	}
}

// Type definitions
/**
 * @typedef {Object} AdminUser
 * @property {number} id - User ID.
 * @property {string} email - Login email address.
 * @property {string} name - Display name.
 * @property {string} role - Authorization role.
 */
/**
 * @typedef {Object} AdminUserByIDRequest
 * @property {string} id
 */
/**
 * @typedef {Object} AdminUserResponse
 * @property {AdminUser} user
 * @property {string} [error]
 */
/**
 * @typedef {Object} AdminUsersResponse
 * @property {AdminUser[]} data
 * @property {string} [error]
 */
/**
 * @typedef {Object} CreateAdminUserRequest
 * @property {string} email
 * @property {string} name
 * @property {string} role
 */
/**
 * @typedef {Object} CreateStateRequest
 * @property {string} code
 * @property {string} name
 */
/**
 * @typedef {Object} State
 * @property {number} id - State ID.
 * @property {string} code - Two-letter state code.
 * @property {string} name - Display name.
 */
/**
 * @typedef {Object} StateByCodeRequest
 * @property {string} code
 */
/**
 * @typedef {Object} StateResponse
 * @property {State} state
 * @property {string} [error]
 */
/**
 * @typedef {Object} StatesResponse
 * @property {State[]} data
 * @property {string} [error]
 */

/**
 * @param {string} [basepath="/"]
 * @returns {object}
 */
export function createClient(basepath = "/") {
	return {
		admin: {
			/**
			 * @param {AdminUserByIDRequest } request
			 * @param {AuthOptions} [options]
			 * @returns {Promise<AdminUserResponse>} 
			 */
			async UserByID(request, options) {
				const headers = {
					"Accept": "application/json",
					"Content-Type": "application/json",
				}
				let url = basepath + "/rpc/admin/user-by-id"
				const authValue = options && options.auth
				if (authValue) {
					headers["Authorization"] = "Bearer " + authValue
				}
				const response = await fetch(url, {
					method: "POST",
					headers,
					body: JSON.stringify(request),
				})
				const text = await response.text()
				let json = null
				if (text) {
					try {
						json = JSON.parse(text)
					} catch (e) {
						if (!response.ok) {
							throw new RPCError(response.status, null, response.status + " " + response.statusText)
						}
						throw e
					}
				}
				if (!response.ok) {
					throw new RPCError(response.status, json, response.status + " " + response.statusText)
				}
				return json
			},
			/**
			 * @param {CreateAdminUserRequest } request
			 * @param {AuthOptions} [options]
			 * @returns {Promise<AdminUserResponse>} 
			 */
			async UserCreate(request, options) {
				const headers = {
					"Accept": "application/json",
					"Content-Type": "application/json",
				}
				let url = basepath + "/rpc/admin/user-create"
				const authValue = options && options.auth
				if (authValue) {
					headers["Authorization"] = "Bearer " + authValue
				}
				const response = await fetch(url, {
					method: "POST",
					headers,
					body: JSON.stringify(request),
				})
				const text = await response.text()
				let json = null
				if (text) {
					try {
						json = JSON.parse(text)
					} catch (e) {
						if (!response.ok) {
							throw new RPCError(response.status, null, response.status + " " + response.statusText)
						}
						throw e
					}
				}
				if (!response.ok) {
					throw new RPCError(response.status, json, response.status + " " + response.statusText)
				}
				return json
			},
			/**
			 * @param {AuthOptions} [options]
			 * @returns {Promise<AdminUsersResponse>} 
			 */
			async UsersGetMany(options) {
				const headers = {
					"Accept": "application/json",
					"Content-Type": "application/json",
				}
				let url = basepath + "/rpc/admin/users-get-many"
				const authValue = options && options.auth
				if (authValue) {
					headers["Authorization"] = "Bearer " + authValue
				}
				const response = await fetch(url, {
					method: "POST",
					headers,
				})
				const text = await response.text()
				let json = null
				if (text) {
					try {
						json = JSON.parse(text)
					} catch (e) {
						if (!response.ok) {
							throw new RPCError(response.status, null, response.status + " " + response.statusText)
						}
						throw e
					}
				}
				if (!response.ok) {
					throw new RPCError(response.status, json, response.status + " " + response.statusText)
				}
				return json
			},
		},
		states: {
			/**
			 * @param {StateByCodeRequest } request
			 * @param {AuthOptions} [options]
			 * @returns {Promise<StateResponse>} 
			 */
			async StateByCode(request, options) {
				const headers = {
					"Accept": "application/json",
					"Content-Type": "application/json",
				}
				let url = basepath + "/rpc/states/state-by-code"
				const response = await fetch(url, {
					method: "POST",
					headers,
					body: JSON.stringify(request),
				})
				const text = await response.text()
				let json = null
				if (text) {
					try {
						json = JSON.parse(text)
					} catch (e) {
						if (!response.ok) {
							throw new RPCError(response.status, null, response.status + " " + response.statusText)
						}
						throw e
					}
				}
				if (!response.ok) {
					throw new RPCError(response.status, json, response.status + " " + response.statusText)
				}
				return json
			},
			/**
			 * @param {CreateStateRequest } request
			 * @param {AuthOptions} [options]
			 * @returns {Promise<StateResponse>} 
			 */
			async StateCreate(request, options) {
				const headers = {
					"Accept": "application/json",
					"Content-Type": "application/json",
				}
				let url = basepath + "/rpc/states/state-create"
				const response = await fetch(url, {
					method: "POST",
					headers,
					body: JSON.stringify(request),
				})
				const text = await response.text()
				let json = null
				if (text) {
					try {
						json = JSON.parse(text)
					} catch (e) {
						if (!response.ok) {
							throw new RPCError(response.status, null, response.status + " " + response.statusText)
						}
						throw e
					}
				}
				if (!response.ok) {
					throw new RPCError(response.status, json, response.status + " " + response.statusText)
				}
				return json
			},
			/**
			 * @param {AuthOptions} [options]
			 * @returns {Promise<StatesResponse>} 
			 */
			async StatesGetMany(options) {
				const headers = {
					"Accept": "application/json",
					"Content-Type": "application/json",
				}
				let url = basepath + "/rpc/states/states-get-many"
				const response = await fetch(url, {
					method: "POST",
					headers,
				})
				const text = await response.text()
				let json = null
				if (text) {
					try {
						json = JSON.parse(text)
					} catch (e) {
						if (!response.ok) {
							throw new RPCError(response.status, null, response.status + " " + response.statusText)
						}
						throw e
					}
				}
				if (!response.ok) {
					throw new RPCError(response.status, json, response.status + " " + response.statusText)
				}
				return json
			},
		},
	}
}
